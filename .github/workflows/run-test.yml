run-name: run deploy and test

on:
  push:
    paths: 
        - 'force-app/**'

jobs:
    run-test-class:
        runs-on: ubuntu-latest
        steps:
          - uses:  actions/checkout@v2
            with:
                fetch-depth: 0
          - name: install-sfdx-clis
            run:
                npm install @salesforce/cli --global
          - name:  login to salesforce org
            run:
                sfdx org login sfdx-url --set-default --sfdx-url-file <(echo "${{ secrets.SFDX_AUTH_URL }}") --alias myOrg
          - name: run deploy
            run: 
                sf project deploy start --ignore-conflicts -o myOrg 
                
                